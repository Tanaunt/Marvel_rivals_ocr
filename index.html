<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Cerca Giocatori dalla Clipboard</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    #results { margin-top: 20px; padding: 10px; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <h1>Cerca Giocatori dalla Clipboard</h1>
  <p>Clicca il pulsante per leggere il testo copiato dalla clipboard (dallo script Python) e cercare i giocatori.</p>
  <button id="readClipboard">Leggi Clipboard</button>
  <div id="results"></div>

  <script>
    // Funzione per processare il testo e cercare i nomi dei giocatori
    function extractPlayerNames(text) {
      // Esempio semplice: cerca righe che abbiano un pattern come "numero/nome"
      const lines = text.split('\n').map(line => line.trim()).filter(Boolean);
      const playerNames = [];
      for (let line of lines) {
        const match = line.match(/(\d+\/[\w\-_\d]+)/g);
        if (match) {
          // Rimuove la parte "numero/" per ottenere solo il nome
          match.forEach(name => {
            const slashIndex = name.indexOf('/');
            if (slashIndex !== -1) {
              playerNames.push(name.substring(slashIndex + 1));
            }
          });
        } else {
          // Altrimenti, se la linea sembra un username (criteri personalizzabili)
          if (line.length >= 3 && line.length <= 20 && /^[A-Za-z0-9_\-]+$/.test(line)) {
            playerNames.push(line);
          }
        }
      }
      // Limitiamo ad esempio a 6 nomi
      return playerNames.slice(0, 6);
    }

    document.getElementById('readClipboard').addEventListener('click', async () => {
      try {
        // Legge il testo dalla clipboard (richiede HTTPS e un'azione utente)
        const text = await navigator.clipboard.readText();
        const players = extractPlayerNames(text);
        document.getElementById('results').innerHTML = `
          <p><strong>Testo dalla Clipboard:</strong></p>
          <pre>${text}</pre>
          <p><strong>Nomi estratti:</strong> ${players.join(', ')}</p>
        `;
        // Qui potresti aggiungere ulteriori logiche per cercare le statistiche dei giocatori, ecc.
      } catch (err) {
        document.getElementById('results').innerText = "Errore nella lettura della clipboard: " + err;
      }
    });
  </script>
</body>
</html>
